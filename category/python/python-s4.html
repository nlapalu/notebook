<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Python scientifique - session 1 - Nicolas Lapalu</title>
		<link rel="stylesheet" href="../../assets/css/highlight.min.css">
		<link rel="stylesheet" href="../../assets/css/bootstrap.min.css">
		<link rel="stylesheet" href="../../assets/css/tipuesearch.css">
		<link rel="stylesheet" href="../../assets/css/main.css">
	</head>
	<body>
		<header class="navbar navbar-default navbar-fixed-top">
			<div class="container-fluid">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="../../">Nicolas Lapalu</a> <p class="navbar-text hidden-xs">Python scientifique - session 1</p>
				</div>

				<div class="collapse navbar-collapse" id="navbar-collapse-1">
					<form action="../../search.html" class="navbar-form navbar-right" role="search">
						<div class="form-group">
							<input type="text" name="q" id="tipue_search_input" autocomplete="off" required class="form-control" placeholder="Search">
						</div>
					</form>
					<ul class="nav navbar-nav navbar-right">
						<li><a href="../../category/python/python-s4-slideshow.html" target="_blank">View as slideshow</a></li>
						<!--li><a href="../../category/python/python-s4-raw.html">View Markdown</a></li-->
					</ul>
				</div>
			</div>
		</header>

		<!--
<div class="toc">
<p class="lead">Table of contents:</p>
<p class="toc-1">
<a href="#python-scientifique-">Python scientifique ...</a>
</p>
<p class="toc-2">
<a href="#introduction">Introduction</a>
</p>
<p class="toc-2">
<a href="#execution-du-code-temps-m-moire">Execution du code temps/mémoire</a>
</p>
<p class="toc-3">
<a href="#calculer-le-temps-d-39-xecution">Calculer le temps d&amp;#39;éxecution</a>
</p>
<p class="toc-3">
<a href="#calculer-l-39-empreinte-m-moire">Calculer l&amp;#39;empreinte mémoire</a>
</p>
<p class="toc-3">
<a href="#d-corators">Décorators</a>
</p>
</div>
-->

		<div class="container">
			<div class="row">
				<nav id="sidebar" class="col-lg-2 col-sm-3">
					<ul class="nav nav-pills nav-stacked">
						<li role="presentation" class=""><a href="../../category/python/python-s1.html">Initiation POO Python</a></li>
						<li role="presentation" class=""><a href="../../category/python/python-s2.html">POO Python suite</a></li>
						<li role="presentation" class=""><a href="../../category/python/python-s3.html">Python, tester son code</a></li>
						<li role="presentation" class="active"><a href="../../category/python/python-s4.html">Python scientifique - session 1</a></li>
					</ul>
					<!--
Available versions:<br>
raw<br>
->category/python/python-s4-raw.html<br>
slideshow<br>
->category/python/python-s4-slideshow.html<br>
default<br>
->category/python/python-s4.html<br>
<br>
Document informations:<br>
category/python/python-s4.md<br><br>
active
-->
				</nav>
				<header>
					<div class="entry-meta text-right">

					</div>
				</header>
				<article id="content" class="col-lg-10 col-sm-9">
					<h1 id="python-scientifique-">Python scientifique ...</h1>
<h2 id="introduction">Introduction</h2>
<p>blbla plusieurs session 1 </p>
<h2 id="execution-du-code-temps-m-moire">Execution du code temps/mémoire</h2>
<h3 id="calculer-le-temps-d-xecution">Calculer le temps d&#39;éxecution</h3>
<p>Si vous êtes sous linux et que vous souhaitez simplement tester le temps d&#39;execution d&#39;un script, le plus simple est d&#39;utiliser la commande system <code>time</code>.</p>
<p><em>time.py:</em></p>
<pre><code class="lang-python">#!/usr/bin/env python3

import time
time.sleep(5)
</code></pre>
<p>execution:</p>
<pre><code class="lang-sh">time ./time.py

real    0m5.050s
user    0m0.036s
sys     0m0.008s
</code></pre>
<p>Pour un affichage plus complet:</p>
<pre><code class="lang-sh">/usr/bin/time -v ./time.py
</code></pre>
<p>Si vous souhaitez mesurer le temps d&#39;execution de seulement une partie de votre code, il existe plusieurs modules qui vous permettront de faire cela. Néanmoins, ils ne vous permettront pas tous de pouvoir controler finement le vrai temps d&#39;execution.</p>
<p>module time: <em>time.py</em></p>
<pre><code class="lang-python">#!/usr/bin/env python3

import time
# timing with system date
start = time.time()
print(start)
time.sleep(5)
print(&quot;{} sec&quot;.format(time.time()-start))
# timing with counter
start = time.perf_counter()
time.sleep(5)
print(start)
print(&quot;{} sec&quot;.format(time.perf_counter()-start))
# timing with execution time without sleep time
start = time.process_time()
print(start)
time.sleep(5)
print(&quot;{} sec&quot;.format(time.process_time()-start))
</code></pre>
<p>execution:</p>
<pre><code>./time.py

1590570012.7908258  # temps depuis epoch, dependant system
5.005113124847412 sec
3783981.080605406 # counter
5.005108261015266 sec
0.038772806 # somme du temps system et cpu depuis du process en cours, sans le temps d&#39;inactivité 
4.544399999999865e-05 sec
</code></pre><p>Pour info, <code>perf_counter()</code> et <code>process_time()</code> existent en version nanoseconds pour les executions rapides <code>perf_counter_ns()</code> et <code>process_time_ns()</code> </p>
<p>Le module timeit a été pensé pour tester des fragments de code. Il est facilement utilisable dans un code, mais aussi par appel direct en ligne de commande. Le module permet d&#39;utiliser principalement 2 fonctions: timeit() ou repeat(), pour lesquels on peut spécifier le code à tester, le nombre d&#39;itérations, une instanciation de paramètres grâce au paramètre setup et posssiblement le nombre de fois que l&#39;on lance le chronomètre.</p>
<p>en ligne de commande:</p>
<pre><code class="lang-sh">python3 -m timeit -n 1000 -r 3 -s &#39;a = &quot;a\tb\tc\td&quot;&#39; &#39;values = a.split(&quot;\t&quot;)&#39; 
1000 loops, best of 3: 287 nsec per loop
</code></pre>
<p>module timeit : _test_timeit.py_</p>
<pre><code class="lang-python">#!/usr/bin/env python3

import timeit

def sp(a):
    values = a.split(&quot;\t&quot;)

if __name__ == &#39;__main__&#39;:
    a = &quot;a\tb\tc\td&quot;
    res = timeit.repeat(&quot;sp(a)&quot;, repeat=3, number=1000, globals=globals())
    print(res)
</code></pre>
<p>execution</p>
<pre><code>./test_timeit.py
[0.0005122157745063305, 0.0005096318200230598, 0.0005084439180791378]
</code></pre><p>Par rapport à l&#39;appel direct de la ligne de commande, on perd en temps d&#39;execution (500 nsec vs 280 nsec). Dans ce cas cela est grandement due au coup d&#39;appel de la fonction. Pour éviter de prendre ça en compte, on peut faire l&#39;appel à timeit() dans la fonction.</p>
<pre><code class="lang-python">#!/usr/bin/env python3

import timeit

def sp(a):
    snippet = &#39;values = a.split(&quot;\t&quot;)&#39;
    res = timeit.repeat(snippet, repeat=3, number=1000, globals=locals())
    print(res)

if __name__ == &#39;__main__&#39;:
    a = &quot;a\tb\tc\td&quot;
    sp(a)
</code></pre>
<p>execution</p>
<pre><code>./test_timeit2.py
[0.00037665385752916336, 0.0003682738170027733, 0.0003675050102174282]
</code></pre><p><a href="https://docs.python.org/fr/3/library/time.html">https://docs.python.org/fr/3/library/time.html</a> 
<a href="https://docs.python.org/fr/3/library/timeit.html">https://docs.python.org/fr/3/library/timeit.html</a> </p>
<h3 id="calculer-l-empreinte-m-moire">Calculer l&#39;empreinte mémoire</h3>
<p>Tester l&#39;empreinte mémoire du code:</p>
<h3 id="d-corators">Décorators</h3>

				</article>
			</div>
		</div>

		<footer><a href="../../site-index.html">Pages index</a>
</footer>

		<script src="../../assets/js/jquery.js"></script>
		<script src="../../assets/js/bootstrap.min.js"></script>
		<script src="../../assets/js/highlight.min.js"></script>
		<script src="../../assets/js/tipuesearch_set.js"></script>
		<script src="../../assets/js/tipuesearch.min.js"></script>
		<script>
			$(function() {
				hljs.initHighlightingOnLoad();
				$('#tipue_search_input').tipuesearch({
					mode: 'json',
					contentLocation: '../../index.json'
				});
			});
		</script>
		
		<!-- Generated by Vegetables from 'category/python/python-s4.md' with format 'default' - '2020-5-27 15:46:03' -->
	</body>
</html>
